---
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import FormattedDate from "../components/FormattedDate.astro";

type Props = CollectionEntry<"blog">["data"];

const { metatitle, title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead metaTitle={metatitle ?? title} title={title} description={description} />
  </head>

  <body>
      <div class="container">
        <Header />
        <main>
          <article class="px-2">
            <div>
              {
                heroImage && (
                  <img width={1020} height={510} src={heroImage} alt="" />
                )
              }
            </div>
            <!-- Article -->
            <div>
                <div class="font-mono pb-4">
                  <h1>{title}</h1>
                <p class="text-sm">{description}</p>
                <div class="text-xs flex gap-x-4">
                  <div>Published: <FormattedDate date={pubDate} /></div>
                  {
                    updatedDate && (
                      <div>
                        Last updated: <FormattedDate date={updatedDate} />
                      </div>
                    )
                  }
                </div>
                </div>
              <slot />
            </div>
            <script src="https://giscus.app/client.js"
        data-repo="heyjaywilson/heyjaywilsoncom"
        data-repo-id="R_kgDOKoCaMQ"
        data-category="Comments"
        data-category-id="DIC_kwDOKoCaMc4Ca9te"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</script>
          </article>
        </main>
      </div>
      <Footer />
  </body>
</html>

<style is:global>
  h1 {
    @apply text-6xl;
  }
  h2 {
    @apply pt-4;
  }
  h3 {
    @apply pt-2 pb-1;
  }
  p {
    @apply py-2;
  }
  ul {
    @apply list-disc list-outside p-2 ms-8 text-lg;
  }
  blockquote {
    @apply px-4 py-1 my-4 border-l-4 border-cyan-500 bg-cyan-900/10 rounded-r-md w-full;
  }

  blockquote > p {
    @apply py-1;
  }
  blockquote > p > strong {
    @apply font-bold font-mono;
  }

  hr {
    @apply my-2 border-cyan-800 rounded-md border-2;
  }
  .affiliateLink {
    @apply text-green-600 underline underline-offset-2 hover:text-green-800
  }
</style>